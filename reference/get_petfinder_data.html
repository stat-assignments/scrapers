<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get adoptable pets from Petfinder — get_petfinder_data • scrapers</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get adoptable pets from Petfinder — get_petfinder_data"><meta name="description" content="Downloads records of adoptable pets. You will need to have a key and a secret from the [PetFinder API](https://www.petfinder.com/developers/)."><meta property="og:description" content="Downloads records of adoptable pets. You will need to have a key and a secret from the [PetFinder API](https://www.petfinder.com/developers/)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scrapers</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/stat-assignments/scrapers/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get adoptable pets from Petfinder</h1>
      <small class="dont-index">Source: <a href="https://github.com/stat-assignments/scrapers/blob/main/R/get_petfinder_data.R" class="external-link"><code>R/get_petfinder_data.R</code></a>, <a href="https://github.com/stat-assignments/scrapers/blob/main/R/petfinder_get_token.R" class="external-link"><code>R/petfinder_get_token.R</code></a></small>
      <div class="d-none name"><code>get_petfinder_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Downloads records of adoptable pets. You will need to have a key and a secret from the [PetFinder API](https://www.petfinder.com/developers/).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_petfinder_data</span><span class="op">(</span></span>
<span>  token <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  endpoint <span class="op">=</span> <span class="st">"animals"</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"cat"</span>, location <span class="op">=</span> <span class="st">"68528"</span><span class="op">)</span>,</span>
<span>  page <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  base_url <span class="op">=</span> <span class="st">"https://api.petfinder.com/v2/"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">petfinder_get_token</span><span class="op">(</span></span>
<span>  key <span class="op">=</span> <span class="fu">get_api_key</span><span class="op">(</span><span class="st">"PETFINDER_API"</span><span class="op">)</span>,</span>
<span>  secret <span class="op">=</span> <span class="fu">get_api_secret</span><span class="op">(</span><span class="st">"PETFINDER_API"</span><span class="op">)</span>,</span>
<span>  base_url <span class="op">=</span> <span class="st">"https://api.petfinder.com/v2"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-token">token<a class="anchor" aria-label="anchor" href="#arg-token"></a></dt>
<dd><p>authentication token. Can be passed in as a result of calling `petfinder_get_token`. If absent, one attempt is made at creating a new token.</p></dd>


<dt id="arg-endpoint">endpoint<a class="anchor" aria-label="anchor" href="#arg-endpoint"></a></dt>
<dd><p>character value - which endpoint of the Petfinder API is being used? API v2 has endpoints `animals` and `organizations`.</p></dd>


<dt id="arg-page">page<a class="anchor" aria-label="anchor" href="#arg-page"></a></dt>
<dd><p>positive integer value, defaults to one. For multi-page results, a way to pick up on a previous result.</p></dd>


<dt id="arg-base-url">base_url<a class="anchor" aria-label="anchor" href="#arg-base-url"></a></dt>
<dd><p>characterstring of the API</p></dd>


<dt id="arg-key">key<a class="anchor" aria-label="anchor" href="#arg-key"></a></dt>
<dd><p>character of the API key, if not specified, loaded from the environment</p></dd>


<dt id="arg-secret">secret<a class="anchor" aria-label="anchor" href="#arg-secret"></a></dt>
<dd><p>character of the API secret, if not specified, loaded from the environment</p></dd>


<dt id="arg-param">param<a class="anchor" aria-label="anchor" href="#arg-param"></a></dt>
<dd><p>(list of) parameters to pass to the endpoint. These will be incorporated into the query in the form of `name='value'&amp;...`</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of (pages of) records returned from the Petfinder API (JSON-style list).
Each element in the list represents one page of results. Each page of results is organized in
form of 'animals' (records of about 20 animals) and 'pagination'.
Records are returned in increasing page order.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># example code</span></span></span>
<span class="r-in"><span><span class="co"># Make sure to get a token before your first use:</span></span></span>
<span class="r-in"><span><span class="va">petf_token</span> <span class="op">&lt;-</span> <span class="fu">petfinder_get_token</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Searching for key &lt;PETFINDER_API_KEY&gt; ... </span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in get_api_key("PETFINDER_API"):</span> </span>
<span class="r-err co"><span class="r-pr">#&gt;</span> No API key found, please supply with `key` argument or store in environment</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cats</span> <span class="op">&lt;-</span> <span class="fu">get_petfinder_data</span><span class="op">(</span>token<span class="op">=</span><span class="va">petf_token</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'petf_token' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">cats</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'cats' not found</span>
<span class="r-in"><span><span class="co"># each element is a list of animals and pagination information:</span></span></span>
<span class="r-in"><span><span class="va">cats</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span>max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'cats' not found</span>
<span class="r-in"><span><span class="va">cats</span><span class="op">[[</span><span class="fl">21</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">pagination</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span> <span class="co"># the last element in the pagination vector contains the link to the next set of records, if available</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'cats' not found</span>
<span class="r-in"><span><span class="va">cats2</span> <span class="op">&lt;-</span> <span class="fu">get_petfinder_data</span><span class="op">(</span>token<span class="op">=</span><span class="va">petf_token</span>, page <span class="op">=</span> <span class="fl">22</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'petf_token' not found</span>
<span class="r-in"><span><span class="co"># not a complete list anymore:</span></span></span>
<span class="r-in"><span><span class="va">cats2</span><span class="op">[[</span><span class="fl">21</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">animals</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'cats2' not found</span>
<span class="r-in"><span><span class="va">animals</span> <span class="op">&lt;-</span> <span class="va">cats</span> <span class="op">|&gt;</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span>.f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="va">animals</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'cats' not found</span>
<span class="r-in"><span><span class="va">animals</span><span class="op">[</span><span class="fl">21</span><span class="op">+</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">21</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">cats2</span> <span class="op">|&gt;</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span>.f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="va">animals</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'cats2' not found</span>
<span class="r-in"><span><span class="va">animals</span> <span class="op">&lt;-</span> <span class="va">animals</span> <span class="op">|&gt;</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html" class="external-link">compact</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># get rid of empty elements</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'animals' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">animals</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'animals' not found</span>
<span class="r-in"><span><span class="co"># flatten the structure once:</span></span></span>
<span class="r-in"><span><span class="va">animal_record_list</span> <span class="op">&lt;-</span> <span class="va">animals</span> <span class="op">|&gt;</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu">flatten</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'animals' not found</span>
<span class="r-in"><span><span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/read_json.html" class="external-link">write_json</a></span><span class="op">(</span><span class="va">animal_record_list</span>, path <span class="op">=</span> <span class="st">"cats.json"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'animal_record_list' not found</span>
<span class="r-in"><span><span class="co"># Authenticate with the petfinder API and get a token</span></span></span>
<span class="r-in"><span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu">petfinder_get_token</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Searching for key &lt;PETFINDER_API_KEY&gt; ... </span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in get_api_key("PETFINDER_API"):</span> </span>
<span class="r-err co"><span class="r-pr">#&gt;</span> No API key found, please supply with `key` argument or store in environment</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Heike Hofmann, Susan Vanderplas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

